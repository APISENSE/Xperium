<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="/libs/leaflet-0.7.2/leaflet.css" />
		<style type="text/css">
			#map{height:600px;}
		</style>
	</head>
	<body onload="initmap();">
	    <div id="map"></div>
		<script src="/libs/leaflet-0.7.2/leaflet.js"></script>
		<script src="/libs/leaflet.polylineDecorator.min.js"></script>
		<script type="text/javascript">
			var map;
			var ajaxRequest;
			var plotlist;
			var plotlayers = [];

			function initmap() {
				// set up the map
				map = new L.Map('map');

				// create the tile layer with correct attribution
				var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
				var osmAttrib='Map data Â© OpenStreetMap contributors';
				var osm = new L.TileLayer(osmUrl, {minZoom: 8, maxZoom: 20, attribution: osmAttrib});		

				// start the map in South-East England
				map.setView(new L.LatLng(50.59680845, 2.95091149), 12);
				map.addLayer(osm);

				addMarkers();
			}
			
			function addMarkers() {
			<%
				data.forEach(function(ride) {
					%>
					L.polyline([[<%= ride[0] %>]
					<% 
					for (var i = 1; i < ride.length; i++) {
						%>,[<%= ride[i] %>]<%
					}
					%>]).addTo(map);
				    <%
				});
			%>
			}
			
		</script>
	</body>
</html>
